function sort_list_images(){jQuery(".sortable").sortable()}jQuery(document).ready(function(e){if(jQuery("select.global_config").length>0){var l=jQuery("select.global_config");l.each(function(){var e=jQuery(this).val(),l=jQuery(this).attr("data-config");l+=e,jQuery(l).show(),jQuery(this).on("change",function(){var e=jQuery(this).find("option:selected").val(),l=jQuery(this).attr("data-config"),i=l+"sub";l+=e,jQuery(i).hide(),jQuery(l).show()})})}clear_button=e(".clear-all-slides"),e(".sortable").each(function(l,i){e(i).find("li").length>0?e(this).parent(".sortable-wrapper").siblings(".clear-all-slides").show():e(this).parent(".sortable-wrapper").siblings(".clear-all-slides").hide()}),clear_button.click(function(){e(this).siblings(".sortable-wrapper").children(".sortable").html(""),e(this).hide()}),count_id=Math.floor(1e3*Math.random()+1),count_id=parseInt(count_id);var i=!1;fancy=e(".preview-img-edit").fancybox({minWidth:450,minHeight:450,beforeLoad:function(){},beforeClose:function(){i=!1}}),e(".save-slide").live("click",function(){e(".fancybox-close").trigger("click")}),e(".sortable").disableSelection(),sort_list_images();var t=!0;"undefined"!=typeof wp.media.editor&&(_orig_send_attachment=wp.media.editor.send.attachment),e(".stag-metabox-table").click(function(){var l=(wp.media.editor.send.attachment,e(this)),i=e(this).siblings(".sortable-wrapper").children(".sortable"),a=e(this).siblings(".clear-all-slides");return t=!0,wp.media.editor.send.attachment=function(e,l){var n="";n="undefined"!=typeof l.sizes.thumbnail?l.sizes.thumbnail.url:l.sizes[e.size].url;var s=l.sizes.full.url,r=e.linkUrl;"file"==e.link&&(r=l.url),"post"==e.link&&(r=l.link),"none"==e.link&&(r="#");var d=l.title,m=l.description,u=l.alt;return build_html="",count_id=l.id,t?(build_html+='<div id="image-value'+count_id+'" class="hidden lightbox-image">',build_html+='<img  class="lightbox-preview-img" src="'+s+'" alt="'+u+'" title="'+d+'">',build_html+='<input type="hidden" value="'+count_id+'" name="element_id[]" class="inline-element element_id">',build_html+='<input type="hidden" value="'+n+'" name="thumb_url[]" id="thumb_url" class="inline-element element_thumb">',build_html+='<input type="hidden" value="'+s+'" id="element_image_url" name="element_image_url[]" class="inline-element insert_url">',build_html+='<p><span class="label">Slide Url</span><input type="text" value="'+r+'" name="element_url[]" class="inline-element link_url"></p>',build_html+='<p><span class="label">Image Title</span><input type="text" value="'+d+'" name="element_title[]" class="inline-element image_title "></p>',build_html+='<p><span class="label">Image Alt</span><input type="text" value="'+u+'" name="element_alt[]" class="inline-element image_alt"></p>',build_html+='<p><span class="label">Slide Title</span><input type="text" value="'+d+'" name="slide_title[]" class="inline-element slide_title"></p>',build_html+='<p><span class="label">Slide Contents</span><textarea name="slide_content[]" class="inline-element slide_content">'+m+"</textarea></p>",build_html+='<div class="btn fancy-button-wrapper"><a href="javascript:void(0)" class="button save-slide" name="save-slide"/>Save</a>',build_html+='<a href="javascript:void(0)" class="button save-slide" name="close-slide"/>Close</a></div>',build_html+="</div>",build_html+='<p class="image-wrappper">',build_html+='<img  class="preview-img" src="'+n+'" alt="'+u+'" title="'+d+'" width="120" height="120">',build_html+='<a href="#image-value'+count_id+'" class="preview-img-edit">Edit</a>',build_html+='<a href="javascript:void(0)" class="preview-img-remove">Del</a>',build_html+="</p>",jQuery('<li class="ui-state-default"></li>').html(build_html).appendTo(i),a.show(),void 0):_orig_send_attachment.apply(this,[e,l])},wp.media.editor.open(l),sort_list_images(),!1}),e(".stag-metabox-table-gallery").click(function(){var l=(wp.media.editor.send.attachment,e(this)),i=e(this).siblings(".sortable-wrapper").children(".sortable"),a=e(this).siblings(".clear-all-slides");return t=!0,wp.media.editor.send.attachment=function(e,l){var n="";n="undefined"!=typeof l.sizes.thumbnail?l.sizes.thumbnail.url:l.sizes[e.size].url;var s=l.sizes.full.url,r=e.linkUrl;"file"==e.link&&(r=l.url),"post"==e.link&&(r=l.link),"none"==e.link&&(r="#");var d=l.title,m=(l.description,l.alt);return build_html="",count_id=l.id,t?(build_html+='<input type="hidden" value="'+count_id+'" name="g_element_id[]" class="inline-element element_id">',build_html+='<input type="hidden" value="'+n+'" name="g_thumb_url[]" class="inline-element element_thumb">',build_html+='<input type="hidden" value="'+r+'" name="g_element_url[]" class="inline-element link_url">',build_html+='<input type="hidden" value="'+d+'" name="g_element_title[]" class="inline-element image_title ">',build_html+='<input type="hidden" value="'+m+'" name="g_element_alt[]" class="inline-element image_alt">',build_html+='<input type="hidden" value="'+s+'" id="element_image_url" name="element_image_url[]" class="inline-element insert_url">',build_html+='<p class="image-wrappper">',build_html+='<img  class="preview-img" src="'+n+'" alt="'+m+'" title="'+d+'" width="120" height="120">',build_html+='<a href="javascript:void(0)" class="preview-img-remove">Del</a>',build_html+="</p>",jQuery('<li class="ui-state-default"></li>').html(build_html).appendTo(i),a.show(),void 0):_orig_send_attachment.apply(this,[e,l])},wp.media.editor.open(l),sort_list_images(),!1}),e(".add_media").on("click",function(){t=!1}),e(".image-wrappper > .preview-img-remove").live("click",function(){var l=(e(this),e(this).closest(".sortable")),i=e(this).closest(".sortable-wrapper").siblings(".clear-all-slides");e(this).parent().parent().remove(),l.find("li").length>0?i.show():i.hide(),sort_list_images()}),e("#menu-posts-wpdance_html ul.wp-submenu li:last-child").addClass("wd-add-category-html-rm")}),jQuery(document).ready(function(e){var l;e("#wd_breadcrumb_media_lib").live("click",function(i){var t=e(this).attr("rel");if(i.preventDefault(),l)return l.open(),void 0;var a=[new wp.media.controller.Library({filterable:"uploaded",title:"Select an Image",multiple:!1,priority:20})];l=wp.media.frames.file_frame_bridal=wp.media({states:a,button:{text:"Insert URL"}}),l.on("select",function(){var i=l.state().get("selection").first().toJSON();e("#"+t).val(i.url),e("#wd_breadcrumb_url_img_id").val(i.id),e("#wd_bread_img_con_id").attr("src",i.url)}),l.open()})});